

<html>
<head>
    <!-- Favicon-->
    <link rel="shortcut icon" href="{{ url_for('static', filename='img/favicon.png' )}}">
    <title>faceit :: Login</title>
    <script src="https://webrtc.github.io/adapter/adapter-latest.js"></script>
    <link rel="stylesheet" href="{{ url_for('static',filename='css/bootstrap.css') }}">
    <link href="css/styles.css" rel="stylesheet" />
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <link href="https://fonts.googleapis.com/css?family=Poppins:100,200,400,300,500,600,700" rel="stylesheet"> 
        <!--
        CSS
        ============================================= -->
        <link rel="stylesheet" href="{{ url_for('static',filename='css/linearicons.css') }}">
        <link rel="stylesheet" href="{{ url_for('static',filename='css/font-awesome.min.css') }}">
        <link rel="stylesheet" href="{{ url_for('static',filename='css/bootstrap.css') }}">
        <link rel="stylesheet" href="{{ url_for('static',filename='css/owl.carousel.css') }}">
        <link rel="stylesheet" href="{{ url_for('static',filename='css/main.css') }}">

        <!-- Stylesheets /-->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css_team/style.css') }}" />
        <!-- Main stylesheet /-->
        <link rel="stylesheet" type="text/css" href="{{ url_for('static',filename='css_team/bootstrap.css') }}">
        <!-- Grid framework /-->
        <link href='http://fonts.googleapis.com/css?family=Open+Sans:400,300,600,700,800' rel='stylesheet' type='text/css'>
        <!-- Open Sans /-->
        <link href='http://fonts.googleapis.com/css?family=PT+Sans+Narrow:400,700' rel='stylesheet' type='text/css'>
        <!-- PT Sans Narrow /-->
        <link href="//netdna.bootstrapcdn.com/font-awesome/4.0.3/css/font-awesome.css" rel="stylesheet">
        <!-- Font Awesome /-->

    <style type="text/css">
        #banner {
            height: 10%;
            width: 105%;
            background-color: black;

        }

        #banner_tag {
            padding: 10px;
            position: relative;
            color: white;
            margin-left: 35%;
        }

        #input {
            position: relative;
            margin-top: 5%;
            width: 100%;
            height: 80%;
            margin-bottom: 10% ;
        }

        #form_input {
            position: relative;
            margin-left: 1%;
            padding-left: 2%;
            width: 40%;
            height: 80%;
            padding-top: 5%;
            padding-bottom: 6.5%;
            padding-right: 5%;
            border: 2px solid black;
        }

        #camera_input {
            position: relative;
            margin: 0%;
            float: right;
            padding: 0%;
            width: 50%;
            height: 90%;
            margin-right: 1%;
           
        }

        #myVideo {
            position: relative;
            width: 100%;
            height: 80%;
            border: 2px solid black;
            padding: 2%;
            margin-right: 1%;
        }
        
    </style>
</head>
<style>
    /* mirror the image */

    video,
    canvas {
        transform: scale(-1, 1);
        /*For Firefox (& IE) */
        -webkit-transform: scale(-1, 1);
        /*for Chrome & Opera (& Safari) */
    }
</style>


<body>
    <div id="banner" class="row fullscreen">
        <h1 id="banner_tag">Face Recognition</h1>
    </div>
    
    <div id="input">
        <div id="camera_input">
            <video id="myVideo" autoplay></video>
            <button id="button"  class="btn btn-success" style="vertical-align:middle">
                <span>Face Capture</span>
            </button>
        </div>
        <div id="form_input">
            <form id="login-detail" action="/authenticate_user" method="POST">
                <div class="form-group">
                    <label for="exampleFormControlFile1">Example file input</label>
                    <input type="file" class="form-control" id="exampleFormControlFile1" accept="image/*">
                </div>

                  <div class="d-flex justify-content-center">
                      <video id="webcam" autoplay playsinline width="160" height="120"></video>
                      <canvas id="canvas" class="d-none"></canvas>
                  </div>

                  

                <input  class="btn btn-success" type="submit" value="Log in" >
            </form>
        </div>
    </div>
    
    
    <script>
        window.alert(localStorage.getItem("myIndex"));
        let v = document.getElementById("myVideo");
        let b = document.getElementById("button");
        
        //create a canvas to grab an image for upload
        let imageCanvas = document.createElement('canvas');
        let imageCtx = imageCanvas.getContext("2d");
        
        function helloWorld() {
            fetch('http://localhost:5000/',{
                method: 'GET',                
            })
            .then(res =>{
                return res.json();
            })
            .then(data => console.log(data))
            .catch(error => console.log(error))
        }

        function makeIndex() {
            fetch('http://localhost:5000/makeindex',{
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    index : "kgec2"
                })                
            })
            .then(res =>{
                return res.json();
            })
            .then(data => console.log(data))
            .catch(error => console.log(error))
        }

        function makeIndex() {
            fetch('http://localhost:5000/makeindex',{
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    index : "kgec2"
                })                
            })
            .then(res =>{
                return res.json();
            })
            .then(data => console.log(data))
            .catch(error => console.log(error))
        }

        function represent() {
            fetch('http://localhost:5000/represent',{
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    img : "data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wCEAAoHCBYWFRgVFhUZGRgaHB4cGBgaGBwaHBgcGBoaGhwaGhocIS4lHB4rIRoaJjgmKy8xNTU1GiQ7QDs0Py40NTEBDAwMEA8QHhISHzQrJCs0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQ0NDQxNDQ0NDQ0NDQ0MTQ0NDQ0NDQ0NP/AABEIAQMAwgMBIgACEQEDEQH/xAAcAAABBQEBAQAAAAAAAAAAAAAFAAIDBAYBBwj/xABBEAACAQIEAggDBAkDAwUAAAABAgADEQQFITESQQYiUWFxgZGhMrHBE0JS8BQVI2JywtHh8TOSslNj4iQ0VHOi/8QAGQEAAgMBAAAAAAAAAAAAAAAAAwQAAQIF/8QAKBEAAwABAwQCAQQDAAAAAAAAAAECEQMSIQQxMkEiURQTIzOhYXHR/9oADAMBAAIRAxEAPwD0S8THSciaYNlaCM3PWEMGBc5PWEW6jwC6PkUQY68YBHCc9jx07Shmrfsml9toPzUfsmmp8kU+zMuBLo2EqINZb5CdD0IkivpHI2kYx0j0lEHrHmMWPMhCNpGxkxkfASbDeQhJLDfDIxQZT1hpH30lUWiB1JtJm5RiP3TrAyiyZjradIkJJ0juKWjIqmsdh6TN8KkxjmRY/McRwhaKE9pUbQulpu62oxdKJ3MK/oLxTK/aY/sf0/vFHfwGLflyexxNFecJiwwV2gfN/iEMMYFzc9YeEW6jxC6PkU5xY1TOqZz2PDmlDNv9Iy3UqADWAc9zdOAoGDN3EG03EVVLBm6UzyBv0pQd5YXHoQAPe49jACU73sB2/Ff/ADHipwa2B4SD4jTsnV2LBz9wcxGLFtdD3/naVmzK2wJ0/NoypWDDiXVDyI1S47RtKlTDqBxDiIOhAtoZFKJlkgz8jn5MLehH1hPCZwj/ALp5i94Jp4RbcVi3ne3iBzlymlMfc9AB7SOZInQaSsp2IjHLWLqCbb23glKKk6OVPZfl2FSZz9MrUrlSSo31uCP3l+suIlUm+xVU9vHcN5Z0gQngqAgcry/jMOBZlN1O0yX6XSrEcS8LdoPOabKKgKGmW4rDT5QmtEVOZBxVJ/IYhEc1S50nBSJ1AJHdOBCDsde6JORhM6NxHk6zqYdydEf/AGmEcPkVZ9eHhH739BLUv0iOkCnMhweZVKVTqJxg7qOXfebPC9GE0Lni7thH5glGiv3V7ha8Pp7tOt2cAr22trBn65b/AKBilD9cU+/0ijH5tfYv+LBu4jOXiJgBkrNA+bfEPCGGgfNfiHhFep8Quh5A8RXnGg3OcaKaE8yNPGIytzwh1vCyZrpNmTfaFBcAdvP05QGmIJ0Nvz2XnazFyWY37TeNp2OgsD3zracbZSOdd7qySPWITYb6GUlxB25S3XTTvtr3wa62MIZCNDGcPgdGEsLjraX87en9PTvgbj0iFTlJgmQwcaCdOq3d7i3MSKhmbKSp1Hfyv2d0GM0YzyYJkKV8V2f3H9p2jmbDme+xgsPFeTBMhOqQ2q2B7tLyzgsydDe+3uDv8hAyPaSrU0kRDc9Hs4u7oW0J4l8zc29Zoxi0YcQF9dPKeW5ZV/aJc2F9+ye5dHMBhfsEqAqbrxEs17X1gNZ0l8S5x7OZJj2e6lDYfetpL2PzFKS3ZvAc4L6S9J6dNRToWZm5jZf7zLVqrP1nNzMxqUp5NOU2GMf0idrhOqPeAnYubuST3xMYqbSnTfc1hI5+ijsikvFOSskPRYjORGMgyu0C5seuPCGWgXN/jHhFep8Q2j5FKYbpTmZdylhwof8Acf6TbOTYzzPNK4eq7CwF/l3wXSzms/QbXrElVyQBfTu7JFx2j6gJ1lbczpCJYFadanxcoWyjIXccRGnKaTD9HBa1oKtSZeAs6VUsnnzUiNxpI2E9IxHRoMNAZncXkDKSLSLVllvRpGWvOQnXy1gdBIly1z90ze5A9jKIjrwkuTv+GcOVOPumTeibK+gcDJEaX0ypzyMrYnBsnIybkyOWhlK5YCaChT+HiJtppflBeToC928tNLw5WW5mbb7ElZLzOHe/IWA8BL5MG4NPaEGgWwiHk6RI04TpGoZRCb7QRSOw/P8AiKQh6ZEYpwxgGVmgTNvjHhDTwHm56/lFep8Q2h5FCqLqw7p5XWazHxnqp2nl+PolazrbZjM9I+WE6lcIbwXA7YTyfKuJxxDvPlG4DCHfnNHgKYUiw1jV3hcAIjL5NPg8KoUAC2kI4egBKGHcjeXErxJvnI7jgvrSW0GYvAhtbSUVj2mdFSTOSKcAeplCHdZ1MrQfdHpCrvOK8mSwcMuHZJUyZW1IEIK6yQVQZWS+QV+p0sdB6Sniej6MpFhqNJolYRORaUraKayeQGkKTujDUEi3gdxCWFIY9pAEk6cYXhrca7MAT47fSU8gQm57I8q3RuEKnbWAqiW2knEZIBEecDk0cO0SxwGkYJZCS/fFIbRSFnqERnIjGARWeBM1+PyhtoDzb4/KK9T4h9DyKZM85zDXE1D++faeiCee47/WqH99v+Rg+l8n/oL1HighgmtbnNHleHYkMwg3IsMCoYiHlqhRckW79ITUrnBNOeMst1WsJyi5g589ww+KrfuUE+nKdw/SfDnTUDkTa58heYWm2uxt3KDYUx/CZDhs6oMNGEJUXRtrSnOCK0yjc9kieE6lESL7CDaYRUig4POdRrS/+i9kZUwhHKTBNyKj4i0aMVGVqZ10Mo1HtKwaygb0rUOoPO0GZFTsh7yfbT+st9ISSANtJDlAsi94v66xuP4xLVXyLV4iNJ2pHE6TJkaDOKdYhOIdZCD4pHrFNGT0+Izk6YcGVmgPNB1/LU9g5mHGmez5+EORuQF8je8X11lDHTrNYG5ficPWDopZaii4LEWcc+G3lpPPs9w7JiKisLdYnxDag+8MYfCOWLpcFdj3ypmtQ1Qrt8a9Vu8X0PlqJWklL4D68rDwaDo/Q/YKTz+UHZtxM5W9h2fIzRYCkEpolrWAg/NcLuRrMt/NsqZ+CRk2y9e2VcRgF+69pLmCOOTW7hB9Z3RQwVRftXiPneMQ2/YC0p9HCaiaq23ZCmXdKqyMAWuIHTicmy3sLkhQp0320MYh7de/nNtZ7gk+eD1fL+kIqIDcX5y8mO5mebZKG4hwTU4pmRLm+0T1J2vgeh7p5D2K6RJSF2Nvf5QRW6eU7aXv4bzC5riS5uWsIMSmGP3j4CFjSTXIC9Rp4RvKnTgfgv5yOl0npObOCjcj93z5iZXD4RLjiJXsvcS8+WLa41mnpwilep3NJnShqLN2C4I59kq0Bwqo7AB7SuysMKEvu4QeDNxAexHpL1bCuhHGjLxbcSkX8CZjGFglPLyJoo1zEWkRhj7RgOs7ykZ3llEusUZc9kU1sKyenzpnJ0wpgrNAuYqGZ1Iv1dIaaBsS4FXXawHrAaz7DGh3A+Kf7JAq6E9a/jMzT43dmbUcS9a1hqdB52M2GJoCubIDxqeFl7uTC/K0AdIawpIlJV4bVAznmTYj2g57jOr4mlRrkCTNhbjaD8DVBsbzT4NlMH3ZE/jkyWaZczLp8jpMliKfD1XTS+xFxPZamGQja0z2Y5YpJ0E2qcmcKjzNHC3CC3Fvw3/vI6eADG9j3jtm8OTpz9hadTBop2H19Zt6xX6KZR6J5IeL+s2PSDIeLDsF0YKbHyMnyLCgDitaHK7jhtM+SyyN7WlJ8418G17WJ95Fi8IyNoLrYWJB07fAzfZzkQ+0cLp1iy+BN9PW0APgqqHYnw0PpDTrIHWiCqFBkphr7k9U6hl8OXjL+VMWIAvbkDuO6T06TO3wt53miwOXAAGwvztM3qLBcabQzE0VVaBPwq5c9/Aug9SPSS1M4bEFkOiBSVFhumvFe2+/kZYx9AMKan97+UQblmHKs3cjjz4SBBZyhiYW1kFSK8c2pEMYXAYfQ1KtzpoNLQsS6EaeAQZQzB3C3QeJHKb5Mmwrjqsf9x+sFYzIHpPx0nDDmra384eI20nXYDVbpe3ueffpFT8Rim74av8A8en+fKKP/tff9Cf7n0bkRGciMQHSu8AZif2hHdD7zO5kf2hi3UPCQxodyapWsgqItmIsx2tY/wBRMf05rcao4Thu1ifxHhh7E4ooOK10t1u49tuzv7pkek+PNZAQOohFjyueQ77TOk9zTD6vEML4DFH7NGHNRNBgMysJjMlxANMKTqCZM+KIawJlVOKZWnS2rJvUzgEbyDFZwgFyRMPicxKL3wemO4mu7X7F5STFUW9SZZrcRnZa/CNPnNTlVGiqK1R0L72uLD+s8+p45OA7Ds/xM9mFdi3xtbkAxFvCxmp023wVWrOP+HtlXPKKtZWW3dGVM6Q7NPE8HiXVgeNiOYY3+eohLE5w3D1LX7ybDyG8t6VJ4yVNw1k9LzOhxKKya2+Md3bK9GgjjUXmMyHpHX6yNZlI1ABtbYg3JhTCZkUIBOkHUOWGmlS4Zq6WUp2C3hecrYNU0HvIMNmgI394sTmAIOvKZoiTyC8Z1q6oD8K3PdxH/wATIKzhQbbsT6SxhNQ9X7ztwAnkiCzEd/EHlCvUux7BtNSiqrEsp1TYEnYawFiMyZibGwhzFDqN3iAaeGBNhOn0Mptr2cnqW0jlHF1L2RmB7prMFmOJRBxsGJ2B3AlHKMvAbkT8oZoZc7szWuF9BHOrelpzhvl+voW0VdVlLgg/W9X8CxTvAIpzNyHMM38TTgMRllldzM7mf+oZoWmdzL4zFep8UM6HkV7wB0t1ojua/tDogDphWQIqA3cm7a/ABsLQGgm6WA2q0peTLYDElT2f4hVKvEARvM5xSzh8UV0BnQqNwlN7Szm9YggDmIMWob98IYqqrAMfCX6OUpVQG9jbQj6yTiZ5Lw6fAHGJI/Ox7RGM5MJNkVRD8PEPHWN/QiuhVgb7FT87Wmty9E2V7BRc3nFeGPsl1UqpPleV3wgtfS17bjeRURw0Oy3FFLy+uZhuq/r2QEzhdNT4SNnO8qpVdyTdTwjYZbmJ1S97bHeE6eJJJvtufDnMvkiEqXPbp5QlVxH3B8T9XwB3PpeL1HywhmdR7cs0WCTgoM7HVgWt3sb/AFlGgdidY2ox4CtyY6gmkpTgxdZaSIMc/VglmC6jeGMTTlCvhZuac9gVLIc6JWKNzYm03TMtGifD1JnlOXY98M/GguOYO0v1ekVWu68eiD7o2mb0qu92eCk0ljBYbE6mKNsO2KawWelxNFOGGBkDTN5ieuZo2mcx6k1CACTyA1J8Ip1HKQxodyvimKUHqKCWAsthezH71u7SYhsoqMhxFRje9+E8wdyb+M9Uw2FU0+BgG62tjsw3Fx2beUD9LcF+xtYC5C2H7xC/WTTW3sS3uZ5NjKfA5Erl4Z6RYXgcg7o3AfLnAcdl5QvSwyQMbQ7kGNC9VjodvGZ8SRGtJUprBJpy8m+GMKbaiTLmaW1HlYH3mUwuP0Aa55a/OWcSBwrwaluXygdrXA1OtxwHTjqBNvmJHVw9J/weky4ouG1B05QiKhFrm3ZLctdmaWtnui++WUr3ABMF5tTRLLYXPL8/nSKrmvDoN+2B6+JZmLHfvkmazlgdTUlrCQSqY0IAqSfJaTMxqHYaDvPOAqKl3Cjcm3rNvQoqqhRsotNVwgabZNSG95NQkQXaSIYEIR113kFQ6ayzUOhlWqulpSIUasbRWWWoToo20mkzJ3iMUdwmdkIerxGdnGNgSTYDcnYQwMgYSJaaorudyCWbuHLwkmFrpUuyMrqCVJU3FxuLjflKHSOpw0uC+rlUHi7BfrAX3wEkkyGmTQRjuw4zftfrkf8A6lPpJRLCmBqPtEJ7rVFvCdMBV4RoOzu2kGIS5UfvD2N/pM0+eC0eUdIetXq950mYqIVM2Gb4f9s457jyveBMXh+dtDDadYSKqcggayVTy9TE9G0brrDoC1gsu+3sPOT0sWeIX5aDugxX3iDyYImE8VjCXJuYypibyhxTqvK2ovcyV3vrGs35/PlGrcm02nQ3J6bMWqWL26oOy3Fr25nXykbUrkiTZQyLLeC7uOsR1Qfu+PfDlBC2gFyNT4SylErSq8SkHjsL/u7xuVL1z/C2/hMtbi08HFNwQBfh1PhOIbi4BjsALVDppwtew5STDEmi55BtPQQf6aL3lersZGbS5gDxFweS395ymgche46+AvK/TL3FVZ1xGHQnuP1jnmXLRpNMbwxR14pnkhZxfTuu+lNEQdvxt6nT2gbMM6r1harVLKNeHqhfMKACfGBUe5tH1WIU+E6SmV6FG2z2fo3hhToUkH4AT/E/Wb3JgbpBW48dhqQ2Ul2H8INvciaHLKikdUg8OmhvawmGp4lnzftUApfsKqzfPTynPfN8/wCRtcSbIfUzptxDuufa043yJ9iY4bnw+cEaPP8AN0tib9p+f+YCxNCzMnZt4bzS9JEtUDeB9DBWb07cLjwPn/eal8Iv2ZutStKNekdxDlZQZRenDzRipApOs6YRq4UHWNXBwm5AtjKIM6g1l/8AQh2yWhgBfeTci9jG5ZhrkMRoIYyLHFapJ24rjlp/i0gxDhEYjkNPHYR2Nw/A6uuzqGHnv8veDzu5COduEbjF1ftKbFRr8RHMgWBPiAPQShgGslV+wBR56n6RZJiTpY9kJ5hhFRKh2SpYi33XsbqewHceY5SprHDKqfaBGEY8DuP4Rr5nTzEkXTD/AMTn2/PvGYJC1J1G4IYDna39veS4Xr0WS2qG47LH+94YEMwFhTqNfXQR2X3H2jDcJ8z/AGnMClw9M6cQut9rga/SLLn4X4G2fqnsBvoT7+shCDCUgzqL87nwGtvaPqoWew5mw+UeifZ1t7jVSR2H8iPWy1QLiwbfxv8AWVhMhEcv/eiktXAvxHbc/PximNqN5ZiAljH1GuCNNpyq1jGPVFjHBc92wCqlMBRZVXQDstMZ0bw9sQ9QjV3JHhqf5h6TaUVIp27Ft6CCMBheHgYd4PiSL/nunMb+bG0viXKmx/iPzipc4nOjdzfMA/WKhqDB+zRleklPn4j6wdVp8dIr3fSH88S6NBOBS6Wly+C/Zj0fkd4yoss5jS4KzAbE3Hnv73kbLpCpmu5V4YlWSETqiayVgQWTU0jVEeWtMtmksFDO6vV4RzPyhVW+0wtB/wAA4PJer9PeZ7Nnuwh/os/Hh3TsY287Ee8I1iMgXWaDfRs9fwm3ohWBRxdWFmHaD9QecwuVdV/nNnhm2gKfJpGdx2E/RnKK7cR90J6vy9bxj0/s0sT123sdh2TR55hlZEqnenv3qdvRrHzMzNG9VyTtux7uzzjEVmQNLDH4ZAF432+6vb3mQKjVH0sL+gEZisQXew22Ue0sYqoEQIvxffPae6EMjnqKnVTrNzY/SVKdJ3YhVJO/5M5gaJc2vZR8Tdn95afGBeohsOZ5n+shC1+jVv8AqL7/ANJyUeF/wn1nZMEyY7EbyOgnE6La/E6j1YD6x+JNosqIbEUB/wB2n/zWHbMI97YdUwdxW4VH4voT9IRc9XWCqjddP4j7qwnKryGp7Fhxcv5fK30jML8P57ZOy9dgOaj6yHDDqDwley/QMzNLhvCBMu2h7HmAsKliRIjQE6V0Aro3aCPTX6mCeU0XTujxYbi5oyt6ng/mmHw2YWFm9f6w0S6nKK3qXhl5zHU5VNS+oiTFKDYmb2sm9F+Rk3kTYtPxD8+EjbHIO0+X9ZFL+i3c/YOzH4oZ6Fv+0dPxKD/tP94BxNTia8IdGntiafLiJU+YP1AhXPwwL5+WTeNR4XDDYke00+Xi/D+bwBiE0XW9jD+WMIlkMEK1AOrIfhYFW8GBF/z2CYmpS+yTgPxE9fuO1puVYXmWzrB/+pY3HCVVzc20+Egd5IPrCaL5wYtcA3C0eBTUPgg8dzKDBmbhGpYyzjsXxHQdUaL4SbDpwJxsOs2ijmvf5xoEQ4uoEUU02HxN2mOw1LgX7Rx1j8A5r32nMJhQ7cT/AALq2trm2gnK7NUew2JsO4dpkIR/pjdsUucKDThGkUrghgsW8dkC3xNAf91PZ1lbEHWEei6XxeH/APsU+msK2YR7pib2gms1ijdjj3NvrCWKOhg7Ep1R3FT6MDOY/IcnsX3PXP8ACPmY1F6g8PpGs3XXvX5f5j0PU8pZQJxJ3gpUs0KV+cphNplGyrnWG+0w7pzZDw/xDVfcCeRz2SpfhPdPK87w/BXqKBYcRI8G631jPT1y0C1VwmUEc30JHnGa3nQd4kF9Y0AHreOjLToMsoYRrLWXvwVqTXtZ09OIX9pXG87U017NfTWZwWequPiHfcDuIEM5Uul4Lr7qdgygjv0l7J6mhXz9Jz2Neg2RAXS+hdEqc1YofB9R5XU/7ocQ6SHGYYVabUmOji1/wndWHgQD5SS8MpmGw1EObO/D2abwlicsqueLjW3b2CAhWKMUcWZSVPcRoYTwLvYlSbdnKHqNRPhmFUY5Raq4VxTFNGVrakDQ6n3nMLhKqIbJ1zoSTpaQ4fNLPxFeVtIS/XiEDqkQF3qw8LkJMxSz2Bf6prd3rFDX6yX8DekUr9TV+v6L2aZ5FW3hroj/AO8w/wDH/K0UU6b9iZ7NiJSxHwxRTlvuNokxPxp/A38skHwekUUtlAxuchp84opS7GyDkZ5701QDEnT7ifzD6RRQ3T+QPU7GbXeSrFFHRYRjWiikINp7x2IiikLPUR/pUD+4P+IlzLDqPE/WKKIPuxpdjQUdo5N4ooMowPTVAMYbC3FTRj3m5W/oAPKV8FXb7M9Y728uyKKdOf4RV+Yqe/nJ13nIomxlE/2rdsUUUKCP/9k="
                  })                
            })
            .then(res =>{
                console.log("SUCCESS"+res);
                return res.json();
            })
            .then(data => console.log(data))
            .catch(error => console.log(error))
        }

        function registerUser() {
            fetch('http://localhost:5000/registeruser',{
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    
                    index : "kgec2",
                    img : "https://akamai.vgc.no/v2/images/8e9dfc53-ec5b-4daa-a517-d02a84d86326?fit=crop&h=1263&w=1900&s=33bb64b0c7be87e9f0effb698dc6b53dccc107b4",
                    name : "Alan Walker"

                  })                
            })
            .then(res =>{
                console.log("SUCCESS"+res);
                return res.json();
            })
            .then(data => console.log(data))
            .catch(error => console.log(error))
        }

        function recogniseUser() {
            fetch('http://127.0.0.1:5000/recognise',{
                method: 'POST',
                headers: {
                    'Content-Type': 'application/json'
                },
                body: JSON.stringify({
                    
                    index : "hi",
                    img : "C:/Users/Saswata Halder/Downloads/bbff6634-0ba8-476b-be9f-ba74629eed55.jpg"                    

                  })                
            })
            .then(res =>{
                console.log("SUCCESS"+res);
                return res.json();
            })
            .then(data => window.alert(JSON.stringify(data["top-matches in percentage"])))
            .catch(error => console.log(error))
        }

        function helloWorld2() {
            console.log("hello world");
            let xhr = new XMLHttpRequest();
            xhr.open('POST', 'http://localhost:5000/', true);
            console.log(xhr);
            xhr.onload = function () {
                console.log(this.status);
                if (this.status === 200) {
                    var data = JSON.parse(this.responseText);
                    
                    console.log(this.response);                     
                }
                else {
                    console.error(xhr);
                }
            };
        }

        //Add file blob to a form and post
        function postFile(file) {
            // let formdata = new FormData();
            // formdata.append("image", file);
            
            // let xhr = new XMLHttpRequest();
            // xhr.open('POST', 'http://localhost:5000/predict', true);
            // xhr.onload = function () {
            //     if (this.status === 200) {
            //         var data = JSON.parse(this.responseText);

            //         console.log(this.response);
            //         if (data['authenticate'] == true) {
            //             alert('User authenticated ! Welcome ' + data['name']);
            //             window.location.href = "{{ url_for('dashboard')}}";
            //         }
            //         else if(data['face_present'] == false){
            //             alert('No face detected in frame!');
            //         }
            //         else {
            //             alert('Unknown user !');
            //             window.location.href = "{{ url_for('login')}}";
            //         } 
            //     }
            //     else {
            //         console.error(xhr);
            //     }
            // };
            // xhr.send(formdata);


        }

        
        //Get the image from the canvas
        function sendImagefromCanvas() {

            //Make sure the canvas is set to the current video size
            imageCanvas.width = v.videoWidth;
            imageCanvas.height = v.videoHeight;

            imageCtx.drawImage(v, 0, 0, v.videoWidth, v.videoHeight);

            //Convert the canvas to blob and post the file
            imageCanvas.toBlob(postFile, 'image/jpeg');
        }

        //Check user using picture
        v.onclick = function () {
            console.log('clicked camera');
            // sendImagefromCanvas();
            // helloWorld();
            // helloWorld2();
            // makeIndex();
            // represent();
            // registerUser();
            recogniseUser();
        };
        
        //Check user using password
        b.onclick = function () {
            console.log('clicked button');
            // sendImagefromCanvas();
            // helloWorld();
            helloWorld2();
        };

        window.onload = function () {

            //Get camera video
            navigator.mediaDevices.getUserMedia({ video: { width: 1280, height: 720 }, audio: false })
                .then(stream => {
                    v.srcObject = stream;
                })
                .catch(err => {
                    console.log('navigator.getUserMedia error: ', err)
                });

        };

    </script>
</body>
</html>

